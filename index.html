<!DOCTYPE html>
<html>
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <style> .chart rect { fill: steelblue; }
    #tooltip {
        opacity: 0;
        position: absolute;
        text-align: center;
        width: 60px; height: 40px;
        background: white;
        border: 0px;
    } </style>

    <style> circle {fill: lightblue; stroke: black;}</style>
    <body onload="init()">
        <h1>Hello World</h1>
        <P> I'm hosted with GitHub Pages.</P>
        <svg width=700 height="700">   
        </svg>
        <script>
            async function init() {
                const data = await d3.csv(
                    'https://raw.githubusercontent.com/ssong44/ssong44.github.io/main/Data/data_filtered.csv');
                var x = d3.scaleLinear().domain([0, 150000]).range([0, 600]);
                var y = d3.scaleLinear().domain([0, 100]).range([600, 0]);
                var color = d3.scaleLinear().domain([0, 100]).range(["lightblue","purple"]);
                
                // Axes
                d3.select("svg").append("g")
                    .attr("transform", "translate("+50+", "+50+")")
                    .call(d3.axisLeft(y)
                    .tickValues([100,80,60,40,20])
                    .tickFormat(d3.format("~s")));
                d3.select("svg").append("g")
                    .attr("transform", "translate("+50+", "+(600+50)+")")
                    .call(d3.axisBottom(x)
                    .tickValues([30000, 60000, 90000, 120000, 150000])
                    .tickFormat(d => (d / 1000)));

                // Axis Labels
                d3.select("svg").append("text")
                    .attr("class", "x label")
                    .attr("text-anchor", "end")
                    .attr("x", 600)
                    .attr("y", 600 - 6)
                    .text("income per capita, inflation-adjusted (dollars)");

                // Plot
                d3.select('svg')
                    .attr("width", 600 + 2*50)
                    .attr("height", 600 + 2*50)
                    .append("g")
                        .attr("transform", "translate("+50+", "+50+")")
                    .selectAll('circle').data(data).enter()
                        .append("circle")
                        .attr("cx", function(d) { return x(d.GDP); } )
                        .attr("cy", function(d) { return y(d.Life_expectancy); } )
                        .attr("r", function(d) { return 2 + Number.parseInt(d.Alcohol); } )
                        .style("fill", function(d) { return color(d.BMI); } );
            }
        </script>
    </body>
</html>